(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(7),i=n.n(a),s=(n(14),n(1)),u=n(2),c=n(4),d=n(3),p=n(5),l=(n(16),function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).videoRef=o.createRef(),n.audioRef=o.createRef(),n.bgAudioRef=o.createRef(),n.lastPauseTime=new Date,n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.audioRef.current&&(console.log("Mounted!"),this.audioRef.current.addEventListener("ended",function(){e.props.onComplete&&e.props.onComplete()}))}},{key:"shouldComponentUpdate",value:function(e){return e.file!==this.props.file}},{key:"playIfNotPlaying",value:function(){this.audioRef.current&&(this.audioRef.current.paused&&((new Date).getTime()-this.lastPauseTime.getTime()>5e3&&this.audioRef.current.load(),this.audioRef.current.play()))}},{key:"pause",value:function(){this.audioRef.current&&(this.lastPauseTime=new Date,this.audioRef.current.pause())}},{key:"render",value:function(){return this.videoRef.current&&this.videoRef.current.load(),this.audioRef.current&&this.audioRef.current.load(),this.bgAudioRef.current&&this.bgAudioRef.current.load(),o.createElement("div",null,o.createElement("video",{className:"cinemagraph",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,ref:this.videoRef},o.createElement("source",{src:"cinemagraphs/".concat(this.props.file,".webm"),type:"video/webm"}),o.createElement("source",{src:"cinemagraphs/".concat(this.props.file,".mp4"),type:"video/mp4"})),o.createElement("audio",{autoPlay:!0,loop:!0,ref:this.bgAudioRef},o.createElement("source",{src:"bgaudio/".concat(this.props.file,".mp3"),type:"audio/mp3"})),o.createElement("audio",{ref:this.audioRef},o.createElement("source",{src:"dialog/".concat(this.props.file,".mp3"),type:"audio/mp3"})))}}]),t}(o.Component)),f=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.keyName)}}]),t}(r.a.Component),m=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).playerRef=r.a.createRef(),n.timeoutId=void 0,n.videos=[{name:"bed",keypresses:["ArrowUp"]},{name:"shower",keypresses:["ArrowDown"]},{name:"bike",keypresses:["ArrowUp","ArrowDown"]},{name:"ubahn",keypresses:["ArrowLeft","ArrowRight"]}],n.onKeyDown=function(e){if(clearTimeout(n.timeoutId),n.playerRef.current){var t=n.videos[n.state.index];if(e.key===t.keypresses[n.state.keypressIndex]){n.playerRef.current.playIfNotPlaying();var o=n.state.keypressIndex>=t.keypresses.length-1?0:n.state.keypressIndex+1;n.setState({keypressIndex:o}),n.timeoutId=window.setTimeout(n.stopAudio,n.state.keyTimeout)}else n.playerRef.current.pause(),n.setState({keypressIndex:0})}},n.onTouchStart=function(e){if(clearTimeout(n.timeoutId),n.playerRef.current){var t=n.videos[n.state.index];n.playerRef.current.playIfNotPlaying();var o=n.state.keypressIndex>=t.keypresses.length-1?0:n.state.keypressIndex+1;n.setState({keypressIndex:o}),n.timeoutId=window.setTimeout(n.stopAudio,n.state.keyTimeout)}},n.stopAudio=function(){n.playerRef.current&&n.playerRef.current.pause()},n.onComplete=function(){var e=n.state.index>=n.videos.length-1?0:n.state.index+1;n.setState({index:e,keypressIndex:0})},n.state={index:0,keypressIndex:0,keyTimeout:1e3},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("touchstart",this.onTouchStart)}},{key:"render",value:function(){var e=this.videos[this.state.index],t=e.keypresses[this.state.keypressIndex];return r.a.createElement("div",{className:"App"},r.a.createElement(l,{file:e.name,ref:this.playerRef,onComplete:this.onComplete}),r.a.createElement(f,{keyName:t}))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(m,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,n){e.exports=n(18)}},[[8,2,1]]]);
//# sourceMappingURL=main.addd485c.chunk.js.map